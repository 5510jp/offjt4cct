# 【AIペアプロ】Copilotに「要件定義書」を丸投げしてコードを書いてもらおう

## 1. はじめに

みなさん、GitHub CopilotなどのAIコーディングアシスタントを活用していますか？
「関数の自動補完」だけで使うのはもったいない！ AIは **「要件定義書」を渡して、アプリの雛形を丸ごと作ってもらう** 時にこそ、その真価を発揮します。

今回は、社内イベントやランチ決めで使えそうな **「リアルタイム投票アプリ」** を題材に、AIにどのような指示（プロンプト）を出せば意図通りのコードが返ってくるのか、その実験結果を共有します。

この記事を読むと、以下のことが学べます。
* 意図が伝わる「構造化されたプロンプト」の書き方
* Node.js + Expressを使った簡易Webアプリの構築フロー
* 実際に動くコードのポイント解説

## ２. 動かしてみよう

### ステップ0:作業環境を準備する
* Visual Studio Code (最新版)
* GitHub Copilot Extension
* Node.js (インストール済みであること)

### ステップ1：要件を明確にする（プロンプトの設計）

AIに指示を出す際、曖昧な指示（例：「投票アプリ作って」）では、AIも迷ってしまいます。
今回は、以下の3点を明確にした「要件定義書」形式のテキストを用意しました。

1.  **目的と特徴:** 何のために、誰が使うのか。
2.  **画面構成:** どのようなページがあり、どう遷移するか。
3.  **ロジック・技術仕様:** 重複投票の防止策や、データ保持の方法。

実際にCopilotに入力したプロンプト（指示書）がこちらです。

まず、空のフォルダをVS Codeで開きます。 次に、Copilot Edits（またはチャット欄）を開き、以下のプロンプト（指示）を投げます。

```text
Node.jsとExpressを使って、要件定義書に従ってアプリを作成してください。

#### 投票アプリ 要件定義書

1. アプリ概要
目的: 社員が手軽に意見を募集・投票できるリアルタイム投票ツール。
特徴: ログイン不要、TOPページに全投票リストを表示、リアルタイムで結果反映。

2. 画面構成と機能詳細
アプリは大きく分けて 3つの画面 で構成します。

① TOPページ（ホーム）
全ての入り口となるページです。
新規作成ボタン: 「新しい投票を作る」ボタンを大きく配置。
投票一覧リスト: 作成された投票のタイトルがリスト形式で並ぶ。
表示順：作成日時が新しい順（降順）。

② 新規作成画面
投票を作成するフォーム画面です。
入力項目:
タイトル（必須）: 投票のテーマ（例：「今月のランチ会どこにする？」）
選択肢（必須 2〜5項目）: テキスト入力欄を5つ用意。空欄は無視する。
作成アクション: 「作成する」ボタン押下でデータを保存し、①のTOPページへ自動遷移。

③ 投票・結果画面（詳細ページ）
投票を行う、または結果を見る画面です。
未投票のユーザー: タイトルと選択肢（ラジオボタン）を表示。「投票する」で結果モードへ。
投票済みのユーザー: 選択肢の代わりに「結果グラフ」を表示。
リアルタイム更新: 他の社員が投票した瞬間、リロードなしでグラフが伸びる。
共通: 「TOPへ戻る」ボタン。

3. ロジック・技術仕様
投票ロジック: 単一回答。
不正防止（簡易Security）: ブラウザの Cookie または LocalStorage に「投票済みフラグ（投票ID）」を保存。
データ保持: サーバー再起動まで（インメモリ）またはJSONファイル保存とする。
```

### ステップ2：しばらく待つとコードが生成されます

[デモ動画(Gif)](./blog-copilot-agent-demo.gif)

* 簡易ブラウザまで起動したら動作確認を行う
* 仕様通りに動かないと箇所をCopilot Edits（またはチャット欄）で指摘して調整する

を繰り返して洗練していってください。

## 3. まとめ (NEXT STEP)
今回は、詳細な要件定義書をCopilotに渡すことで、機能的な投票アプリを作成しました。 ポイントは、「画面構成」と「ロジック（制約条件）」を箇条書きで明確に伝えたことです。これさえできれば、実装の8割はAIがやってくれます。

## 4. Next Challenge
作成されたアプリをベースに、さらに拡張してみましょう。

永続化: 現在はメモリやファイル保存ですが、SQLiteやMongoDB等のデータベースに接続させる。

デザイン: Tailwind CSSなどを導入して、UIをモダンにする。

公開: 社内サーバーやクラウド環境にデプロイしてみる。

